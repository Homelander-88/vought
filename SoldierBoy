javascript:(function(){
const OPENAI_KEY='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';
let busy=false;

function scrape(){
try{
let q=null;
['.ql-editor','[aria-labelledby="question-data"]','#question-data','.question-text','[class*="question"]','[class*="Question"]','main'].some(s=>{
const e=document.querySelector(s);
if(e&&e.innerText&&e.innerText.length>10){q=e;return true;}
});
let question='';
if(q){question=(q.innerText||'').trim();}
else{
const lines=(document.body.innerText||'').split('\n').filter(l=>l.trim().length>15);
question=lines.slice(0,15).join('\n');
}
[...document.querySelectorAll('pre,code,.code-block,[class*="code"]')].forEach((b,i)=>{
const t=(b.innerText||'').trim();
if(t.length>5&&t.length<3000&&!question.includes(t)){
question+='\n[CODE '+(i+1)+']:\n'+t;
}
});
if(!question||question.length<10)return null;
let els=document.querySelectorAll('[id^="tt-option-"]');
if(!els.length)els=document.querySelectorAll('.option,[class*="option"]');
const seen=new Set(),options=[];
els.forEach(el=>{
try{
const t=(el.innerText||'').trim();
if(!t||seen.has(t))return;
seen.add(t);
options.push({index:options.length,text:t,el});
}catch{}
});
if(options.length<2)return null;
return{question,options};
}catch{return null;}
}

async function ask(ctx){
try{
const r=await fetch('https://api.openai.com/v1/chat/completions',{
method:'POST',
headers:{'Content-Type':'application/json','Authorization':'Bearer '+OPENAI_KEY},
body:JSON.stringify({
model:'gpt-4.1-mini',
messages:[
{role:'system',content:'You are a precise computer science and education expert.'},
{role:'user',content:
'QUESTION:\n'+ctx.question+
'\n\nOPTIONS:\n'+ctx.options.map((o,i)=>i+'. '+o.text).join('\n\n')+
'\n\nReturn JSON only:\n{"correctIndex":number,"confidence":0-100}'
}
],
temperature:0.05,
max_tokens:1500
})
});
if(!r.ok)return null;
const j=await r.json();
const o=JSON.parse(j.choices?.[0]?.message?.content||'{}');
if(typeof o.correctIndex!=='number')return null;
if(o.correctIndex<0||o.correctIndex>=ctx.options.length)return null;
if((o.confidence||0)<55)return null;
return o.correctIndex;
}catch{return null;}
}

async function solve(){
if(busy)return;
busy=true;
try{
const data=scrape();
if(!data)return;
const idx=await ask(data);
if(typeof idx!=='number')return;
const el=data.options[idx]?.el;
if(!el)return;
try{el.style.border='1px solid rgba(155, 157, 155, 0.57)';el.scrollIntoView({behavior:'smooth',block:'center'});}catch{}
}catch{}finally{busy=false;}
}

document.addEventListener('keydown',e=>{
if(e.altKey&&e.code==='KeyA'){e.preventDefault();solve();}
});
})();
